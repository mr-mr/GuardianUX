$(function(){function w(e,t){$.each(e,function(){$(this).text(t)});t=t.replace(" & ","-");$("body").attr("id",t.toLowerCase())}function E(){g=$("#navigation-horizontal .primary-navigation li:hidden");return g}function S(e){y=$(e).find("li:hidden");return y}function x(r,s){i=$(".primary-navigation a.selected").attr("href");a!==null&&$(i).children("ul").append(a);m.empty();l.removeClass("selected").filter(r).addClass("selected");c.removeClass("selected");a=$(s).find("li");n=$(".primary-navigation a.selected").text();w(t,n);S($(s));if(e<500){f.hide();y.appendTo(m);console.log($(i));if(i==="#home-subsections"){$(".crumbtrail").show();v.hide().find("li").appendTo(p).children("a").bind().click(function(){x(this,this.hash)})}if(s==="#home-subsections"){$(".crumbtrail").hide();u.appendTo(v).children("a").bind().click(function(){x(this,this.hash)});v.show().find($("a".attr("href",s))).addClass("selected")}}else if(e>=500){f.hide().filter(s).show();y.appendTo(m)}event.preventDefault()}function T(e,t){if($(e).is(":visible")){$(e).slideUp();$(t).removeClass("selected")}else{$(e).slideDown();$(t).addClass("selected")}}function N(){if(e!==$(window).width()){e=$(window).width();p.empty().append(u);u.children("a").bind().click(function(){x(this,this.hash)});r=$("#navigation-horizontal .primary-navigation a.selected").attr("href");a!==null&&$(r).children("ul").append(a);C(e);if(e>=500){E();g.appendTo(v);if($(v).find("a.selected").length===1){s=v.find("a.selected").parent("li");o=p.children("li").filter(":last");console.log(s,o);s.appendTo(p);o.prependTo(v)}S($(r));y.appendTo(m);if($(m).find("a.selected").length===1){s=m.find("a.selected").parent("li");o=d.children("li").filter(":last");console.log(s,o);s.appendTo(d);o.prependTo(m)}a!==null&&$(r).show()}else{f.hide();$(a).appendTo(m)}}}function C(e){var t=$("body").attr("id");e<500&&t==="home"?console.log("smaller than 500"):e>=500&&t==="home"?console.log("bigger than 500"):e<500&&t!=="home"&&console.log(t)}var e=$(window).width(),t=[$("title"),$(".crumbtrail a.selected"),$(".subsection-navigation h2"),$("h1")],n=$(".primary-navigation a.selected").text(),r,i,s,o,u=$("#navigation-horizontal .primary-navigation li"),a,f=$("#navigation-horizontal .subsection-navigation"),l=$(".primary-navigation a"),c=$(".subsection-navigation a"),h=$(".crumbtrail a"),p=$("#navigation-horizontal .primary-navigation ul"),d=$("#navigation-horizontal .subsection-navigation ul"),v=$("#navigation-dropdown .primary-navigation ul"),m=$("#navigation-dropdown .subsection-navigation ul"),g,y,b=$("a.dropdown-control");f.hide();w(t,n);E();g.appendTo(v);C(e);l.click(function(){x(this,this.hash)});c.click(function(){c.removeClass("selected").filter(this).addClass("selected");event.preventDefault()});h.click(function(){x(this,this.hash)});b.click(function(){b.removeClass("selected");e=$(window).width();if(e>=700){$("#global-search-dropdown").show();T(this.hash,this)}else if(e<700)if(this.hash==="#global-search-dropdown"){$("#navigation-dropdown").slideUp();T(this.hash,this)}else if(this.hash==="#navigation-dropdown"){$("#global-search-dropdown").slideUp();T(this.hash,this)}event.preventDefault()});$(window).resize(function(){N()})});